---
layout: tag
title: "꿈꾸는 장난감 개발일지 01"
categories:
- GameProgramming
tag:
- GamerProgramming
---

## Introduce Game

- 장르: 3D 방치형 힐링게임  
- 한줄소개: 꿈 속 나만의 장난감을 수집하는 방치형 힐링게임  
- 개발기간: 2021-10 ~ 2021-12-16  
- 제작 인원: 아트2 프로그래밍1  
- 나의 역할: 프로그래밍과 기획


### Singleton 패턴과 프로퍼티 사용

제가 공부했던 사이트 소개입니다.

```Csharp
using System.Collections;
using System.Collections.Generic;
using UnityEngine;

public class Data : MonoBehaviour
{
    private static Data datacontroller;

    public static Data M_Data
    {
        get
        {
            if (datacontroller == null)
            {
                datacontroller = FindObjectOfType<Data>();
                if (datacontroller == null)
                {
                    GameObject emptyObject = new GameObject("DataController");
                    datacontroller = emptyObject.AddComponent<Data>();
                }
            }
            DontDestroyOnLoad(datacontroller);
            return datacontroller;
        }
    }

    //현재 총 소지금 저장
    public float gold
    {
        get
        {
            return PlayerPrefs.GetFloat("Gold");
        }
        set
        {
            PlayerPrefs.SetFloat("Gold", value);
        }
    }

    //시간당 자동으로 수급하는 소지금 저장
    public float goldPerTime
    {
        get
        {
            return PlayerPrefs.GetFloat("GoldPerTime", 0.3f);
        }
        set
        {
            PlayerPrefs.SetFloat("GoldPerTime", value);
        }
    }

    //화면 터치시 얻는 소지금 저장
    public float goldPerTouch
    {
        get
        {
            return PlayerPrefs.GetFloat("GoldPerTouch", 5000);

        }
        set
        {
            PlayerPrefs.SetFloat("GoldPerTouch", value);
        }
    }

    //현재 인형의 집 레벨 저장
    public int Level
    {
        get
        {
            return PlayerPrefs.GetInt("Level", 1);
        }
        set
        {
            PlayerPrefs.SetInt("Level", value);
        }
    }

    private void Awake()
    {
        PlayerPrefs.DeleteAll();
    }

    //upgrade button data 저장
    public void SaveUpgradeButton(UpgradeButton upgradeBt)
    {
        string key = upgradeBt.name;
        PlayerPrefs.SetInt(key + "_lelve", upgradeBt.level);
        PlayerPrefs.SetFloat(key + "_goldTimeByUpgrade", upgradeBt.goldTimeUpgrade);
        PlayerPrefs.SetFloat(key + "_goldTouchByUpgrade", upgradeBt.goldTuchUpgrade);
        PlayerPrefs.SetFloat(key + "_cost", upgradeBt.currentCost);
    }

    //upgrade button data 불러오기
    public void LoadUpgradeButton(UpgradeButton upgradeBt)
    {
        string key = upgradeBt.name;
        upgradeBt.level = PlayerPrefs.GetInt(key + "_level", 1);
        upgradeBt.goldTimeUpgrade = PlayerPrefs.GetFloat(key + "_goldTimeByUpgrade", upgradeBt.startGoldTimeUpgrade);
        upgradeBt.goldTuchUpgrade = PlayerPrefs.GetFloat(key + "_goldTouchByUpgrade", upgradeBt.startGoldTouchUpgrade);
        upgradeBt.currentCost = PlayerPrefs.GetFloat(key + "_cost", upgradeBt.startCurrentCost);
    }

    //item 구매후 data 불러오기
    public void SaveItemButton(ItemButton itemBt)
    {
        string key = itemBt.name;
    }

    //item 구매후 data 저장하기
    public void LoadItemButton(ItemButton itemBt)
    {
        string key = itemBt.name;
    }
}



```

Data 클래스는 게임에 모든 데이터를 저장하고 있는 클래스입니다.
이때 데이터들은 소지금, 레벨, 구매한 아이템, 업그레이드한 정보 등 다른 클래스에서도 자주 사용될 거 같아 싱글톤 패턴으로 구현하였습니다.

추가로 Gold와 Level 의 정보는 매번 아이템을 구매하거나 업그레이드 시 소지금을 가져와 변화시킬때 Get() Set() Add() Sub() 등의 함수를 여러개 만드는 것 대신 프로퍼티로 구현하였습니다.